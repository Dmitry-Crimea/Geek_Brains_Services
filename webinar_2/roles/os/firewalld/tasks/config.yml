---
- name: adding a firewall rules
  block:
    - name: allow icmp
      firewalld:
        zone: public
        state: enabled
        permanent: yes
        icmp_block_inversion: no

    - name: add services into firewall
      firewalld:
        zone: public
        service: "{{ items }}"
        permanent: yes
        state: enabled
      loop:
        - nfs
        - mountd
#        - bind
#        - ospf

    - name: allow ospf
      firewalld:
        zone: public
        port: "{{ items }}"
        state: enabled
        permanent: yes
      loop:
        - 2049/tcp
        - 89/tcp
        - 111/tcp
        - 20048/tcp
      notify: reload firewalld




